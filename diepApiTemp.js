var diepAPI;(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{apis:()=>n,core:()=>o,extensions:()=>s,tools:()=>i,types:()=>a});var n={};e.r(n),e.d(n,{arena:()=>p,camera:()=>w,game:()=>l,input:()=>m,minimap:()=>h,player:()=>k,playerMovement:()=>g,scaling:()=>u});var o={};e.r(o),e.d(o,{CanvasKit:()=>c,EventEmitter:()=>d,Movement:()=>x,Vector:()=>r});var s={};e.r(s),e.d(s,{debugTool:()=>M,entityManager:()=>S});var i={};e.r(i),e.d(i,{backgroundOverlay:()=>A,overlay:()=>T});var a={};e.r(a),e.d(a,{Entity:()=>b,EntityColor:()=>C,EntityType:()=>P});class r{x;y;constructor(e,t){this.x=e,this.y=t}static len(e){return Math.sqrt(e.x**2+e.y**2)}static round(e){return new r(Math.round(e.x),Math.round(e.y))}static scale(e,t){return new r(e*t.x,e*t.y)}static unscale(e,t){return new r(t.x/e,t.y/e)}static add(e,t){return new r(e.x+t.x,e.y+t.y)}static subtract(e,t){return new r(e.x-t.x,e.y-t.y)}static multiply(e,t){return new r(e.x*t.x,e.y*t.y)}static divide(e,t){return new r(e.x/t.x,e.y/t.y)}static distance(e,t){return r.len(r.subtract(e,t))}static centroid(...e){const t=e.reduce(((e,t)=>r.add(e,t)),new r(0,0));return r.scale(1/e.length,t)}static radius(...e){const t=r.centroid(...e);return e.reduce(((e,n)=>e+r.distance(t,n)),0)/e.length}}class c{static createCanvas(){const e=document.createElement("canvas");return e.className="CanvasKit-bypass",e.style.pointerEvents="none",e.style.position="fixed",e.style.zIndex="1",e.style.top="0px",e.style.left="0px",e.style.right="0px",e.style.bottom="0px",e.style.width="100%",e.style.height="100%",e}static hookRAF(e){_window.requestAnimationFrame=new Proxy(_window.requestAnimationFrame,{apply:(t,n,o)=>(e(),Reflect.apply(t,n,o))})}static hookCtx(e,t){const n=_window.CanvasRenderingContext2D.prototype;n[e]=new Proxy(n[e],{apply:(e,n,o)=>("CanvasKit-bypass"!==n.canvas.className&&t(e,n,o),Reflect.apply(e,n,o))})}static overrideCtx(e,t){const n=_window.CanvasRenderingContext2D.prototype;n[e]=new Proxy(n[e],{apply:(e,n,o)=>"CanvasKit-bypass"!==n.canvas.className?t(e,n,o):Reflect.apply(e,n,o)})}static hookPolygon(e,t){let n=0,o=[];c.hookCtx("beginPath",((e,t,s)=>{n=1,o=[]})),c.hookCtx("moveTo",((e,t,s)=>{if(1===n)return n++,void o.push(new r(s[0],s[1]));n=0})),c.hookCtx("lineTo",((t,s,i)=>{if(n>=2&&n<=e)return n++,void o.push(new r(i[0],i[1]));n=0})),c.hookCtx("fill",((s,i,a)=>{if(n===e+1)return n++,void t(o,i);n=0}))}}class d extends EventTarget{emit(e,...t){super.dispatchEvent(new CustomEvent(e,{detail:t}))}on(e,t){super.addEventListener(e,(e=>Reflect.apply(t,this,e.detail)))}once(e,t){super.addEventListener(e,(e=>Reflect.apply(t,this,e.detail)),{once:!0})}off(e,t){super.removeEventListener(e,t)}}const l=new class extends d{#e=!1;#t;constructor(){super(),c.hookRAF((()=>this.#n()))}#n(){this.#e||void 0===_window.input||(this.#e=!0,this.#o()),super.emit("frame"),super.emit("frame_end")}#o(){if(setTimeout((()=>super.emit("ready")),100),this.#t=document.querySelector("d-base")?.shadowRoot,null==this.#t)throw new Error("diepAPI: Shadow root does not exist.");new MutationObserver(((e,t)=>{e.forEach((e=>{0!==e.addedNodes.length&&(super.emit("state",this.state),super.emit(`s_${this.state}`))}))})).observe(this.#t,{childList:!0})}get state(){return this.#t?.querySelector(".screen")?.tagName.slice(2).toLowerCase()}get inHome(){return"home"===this.state}get inGame(){return"game"===this.state}get inStats(){return"stats"===this.state}get inLoading(){return"loading"===this.state}get inCaptcha(){return"captcha"===this.state}},h=new class{#s=new r(1,1);#i=new r(0,0);#a=new r(1,1);#r=new r(1,1);#c=new r(.5,.5);#d=!1;constructor(){l.once("ready",(()=>{_window.input.set_convar("ren_minimap_viewport","true"),_window.input.set_convar=new Proxy(_window.input.set_convar,{apply:(e,t,n)=>{if("ren_minimap_viewport"!==n[0])return Reflect.apply(e,t,n);this.#d=n[1]}})})),this.#l(),this.#h(),this.#w()}get minimapDim(){return this.#s}get minimapPos(){return this.#i}get viewportDim(){return this.#a}get viewportPos(){return this.#r}get arrowPos(){return this.#c}#l(){c.hookCtx("strokeRect",((e,t,n)=>{const o=t.getTransform();this.#s=new r(o.a,o.d),this.#i=new r(o.e,o.f)}))}#h(){c.overrideCtx("fillRect",((e,t,n)=>{const o=t.getTransform();return.1!==t.globalAlpha||Math.abs(o.a/o.d-_window.innerWidth/_window.innerHeight)>_window.innerWidth/_window.innerHeight*5e-5?Reflect.apply(e,t,n):(this.#a=new r(o.a,o.d),this.#r=new r(o.e,o.f),this.#d?Reflect.apply(e,t,n):void 0)}))}#w(){c.hookPolygon(3,((e,t)=>{const n=Math.round(r.distance(e[0],e[1])),o=Math.round(r.distance(e[0],e[2])),s=Math.round(r.distance(e[1],e[2]));if(n===o&&o===s)return;const i=r.centroid(...e),a=r.subtract(i,this.#i),c=r.divide(a,this.#s);this.#c=c}))}},w=new class{#u=new r(0,0);constructor(){l.on("frame_end",(()=>{const e=r.add(h.viewportPos,r.unscale(2,h.viewportDim)),t=r.subtract(e,h.minimapPos),n=r.divide(t,h.minimapDim);this.#u=p.scale(n)}))}get position(){return this.#u}},u=new class{#p=1;#y=!1;constructor(){setTimeout((()=>{_window.input.set_convar=new Proxy(_window.input.set_convar,{apply:(e,t,n)=>{"ren_solid_background"===n[0]?this.#y=n[1]:Reflect.apply(e,t,n)}})}),1e3),c.overrideCtx("stroke",((e,t,n)=>"#cdcdcd"!==t.fillStyle||0===t.globalAlpha?Reflect.apply(e,t,n):(this.#p=10*t.globalAlpha,this.#y?void 0:Reflect.apply(e,t,n))))}get windowRatio(){return Math.max(_window.innerWidth/1920,_window.innerHeight/1080)}get scalingFactor(){return this.#p}get fov(){return this.#p/this.windowRatio}toArenaUnits(e){return r.round(r.unscale(this.#p,e))}toCanvasUnits(e){return r.round(r.scale(this.#p,e))}toArenaPos(e){const t=r.subtract(e,this.screenToCanvas(new r(_window.innerWidth/2,_window.innerHeight/2))),n=this.toArenaUnits(t);return r.add(n,w.position)}toCanvasPos(e){const t=r.subtract(e,w.position),n=this.toCanvasUnits(t);return r.add(n,this.screenToCanvas(new r(_window.innerWidth/2,_window.innerHeight/2)))}screenToCanvasUnits(e){return e*_window.devicePixelRatio}canvasToScreenUnits(e){return e/_window.devicePixelRatio}screenToCanvas(e){return r.scale(_window.devicePixelRatio,e)}canvasToScreen(e){return r.scale(1/_window.devicePixelRatio,e)}},p=new class{#m=1;constructor(){setInterval((()=>{const e=r.divide(h.minimapDim,h.viewportDim),t=r.multiply(e,u.screenToCanvas(new r(_window.innerWidth,_window.innerHeight))),n=u.toArenaUnits(t);this.#m=n.x}),16)}get size(){return this.#m}scale(e){const t=e=>Math.round(this.#m*(e-.5));return new r(t(e.x),t(e.y))}unscale(e){const t=e=>e/this.#m+.5;return new r(t(e.x),t(e.y))}},y=e=>new Promise(((t,n)=>setTimeout(t,e))),m=new class{#v;constructor(){l.once("ready",(()=>{if(this.#v=document.getElementById("canvas"),null==this.#v)throw new Error("diepAPI: Game canvas does not exist.")}))}keyDown(e){"string"==typeof e&&(e=this.#x(e));const t=new KeyboardEvent("keydown",{key:"",code:"",keyCode:e,which:e,cancelable:!0,composed:!0,bubbles:!0});_window.dispatchEvent(t)}keyUp(e){"string"==typeof e&&(e=this.#x(e));const t=new KeyboardEvent("keyup",{key:"",code:"",keyCode:e,which:e,cancelable:!0,composed:!0,bubbles:!0});_window.dispatchEvent(t)}async keyPress(e){this.keyDown(e),await y(200),this.keyUp(e),await y(10)}mouse(e,t){const n=new MouseEvent("mousemove",{clientX:e,clientY:t,cancelable:!0,composed:!0,bubbles:!0});this.#v?.dispatchEvent(n)}#x(e){if(1!=e.length)throw new Error(`diepAPI: Unsupported key: ${e}`);return e.toUpperCase().charCodeAt(0)}},v=new class{#g;#f;connected;constructor(){this.#g=[0,0,0,0],this.#f=[...Array(17)].map((e=>({pressed:!1}))),this.connected=!1,_window.navigator.getGamepads=new Proxy(_window.navigator.getGamepads,{apply:(e,t,n)=>this.connected?[this.#k()]:Reflect.apply(e,t,n)})}set x(e){this.#g[0]=e}set y(e){this.#g[1]=e}set mx(e){this.#g[2]=e}set my(e){this.#g[3]=e}set leftMouse(e){this.#f[7].pressed=e}set rightMouse(e){this.#f[6].pressed=e}get x(){return this.#g[0]}get y(){return this.#g[1]}get mx(){return this.#g[2]}get my(){return this.#g[3]}get leftMouse(){return this.#f[7].pressed}get rightMouse(){return this.#f[6].pressed}#k(){return{axes:this.#g,buttons:this.#f,mapping:"standard"}}};class x{#u=new r(0,0);#P=new r(0,0);#C=10;#_=[];#b=0;#R=performance.now();get position(){return this.#u}get velocity(){return this.#P}predictPos(e){const t=(e+performance.now()-this.#R)/1e3;return r.add(this.#u,r.scale(t,this.#P))}updatePos(e){this.#S(e),this.#u=e}#S(e){const t=performance.now(),n=(t-this.#R)/1e3;if(0===n)return;this.#R=t;const o=r.unscale(n,r.subtract(e,this.#u));this.#_[this.#b++]=o,this.#b%=this.#C,this.#P=r.unscale(this.#_.length,this.#_.reduce(((e,t)=>r.add(e,t))))}}const g=new class extends x{constructor(){super(),l.on("frame_end",(()=>super.updatePos(p.scale(h.arrowPos))))}},f=e=>new Promise(((t,n)=>setTimeout(t,e))),k=new class extends d{#T=!0;#M=!1;#A=new r(0,0);#E=new r(0,0);#D=_window.localStorage.name;#U=_window.localStorage.gamemode;#N=1;#I="Tank";constructor(){super(),l.once("ready",(()=>{l.on("frame",(()=>{const e=!_window.input.should_prevent_unload();this.#T!=e&&(this.#T=e,this.#T?this.#H():this.#B())})),l.on("frame",(()=>{this.#E=u.toArenaPos(this.#A)}));const e=document.getElementById("canvas");if(null==e)throw new Error("diepAPI: Game canvas does not exist.");e.onmousemove=new Proxy(e.onmousemove??(()=>{}),{apply:(e,t,n)=>{if(!this.#M)return this.#L(n[0]),Reflect.apply(e,t,n)}}),e.onmousedown=new Proxy(e.onmousedown??(()=>{}),{apply:(e,t,n)=>{if(!this.#M)return this.#W(n[0]),Reflect.apply(e,t,n)}}),e.onmouseup=new Proxy(e.onmouseup??(()=>{}),{apply:(e,t,n)=>{if(!this.#M)return this.#$(n[0]),Reflect.apply(e,t,n)}}),_window.onkeydown=new Proxy(_window.onkeydown??(()=>{}),{apply:(e,t,n)=>(this.#F(n[0]),Reflect.apply(e,t,n))}),_window.onkeyup=new Proxy(_window.onkeyup??(()=>{}),{apply:(e,t,n)=>(this.#z(n[0]),Reflect.apply(e,t,n))}),_window.input.trySpawn=new Proxy(_window.input.trySpawn,{apply:(e,t,n)=>(this.#D=n[0],Reflect.apply(e,t,n))}),c.hookCtx("fillText",((e,t,n)=>{const o=n[0].match(/^Lvl (\d+) (.+)$/);if(null==o)return;const s=Number(o[1]),i=o[2];for(;s>this.#N+1;)super.emit("level",++this.#N);s!==this.#N&&super.emit("level",s),i!==this.#I&&super.emit("tank",i),this.#N=s,this.#I=o[2]}))}))}get position(){return g.position}get velocity(){return g.velocity}get mouse(){return this.#E}get isDead(){return this.#T}get gamemode(){return this.#U}get level(){return this.#N}get tank(){return this.#I}predictPos(e){return g.predictPos(e)}async#H(){await f(50),super.emit("dead")}async#B(){this.#U=_window.localStorage.gamemode,await f(50),super.emit("spawn")}useGamepad(e){v.connected=e}async spawn(e=this.#D){this.#T&&_window.input.trySpawn(e)}async upgrade_stat(e,t){if(e<1||e>8)throw`diepAPI: ${e} is not a supported stat`;m.keyDown(85);for(let n=0;n<t;n++)await m.keyPress(48+e);m.keyUp(85),await f(250)}async upgrade_tank(e){const t=(e-=1)%2,n=Math.floor(e/2),o=u.screenToCanvasUnits(u.windowRatio*(115*t+97.5)),s=u.screenToCanvasUnits(u.windowRatio*(110*n+120));this.#M=!0,m.mouse(o,s),await m.keyPress(1),await f(200),this.#M=!1,await f(1500)}moveTo(e){if(v.connected){const t=r.subtract(e,this.position),n=r.len(t);if(0===n)return v.x=0,void(v.y=0);const o=r.scale(1/n,t);v.x=o.x,v.y=o.y}else{const t=r.subtract(e,this.position);t.x>0?(m.keyUp("a"),m.keyDown("d")):t.x<0?(m.keyUp("d"),m.keyDown("a")):(m.keyUp("a"),m.keyUp("d")),t.y>0?(m.keyUp("w"),m.keyDown("s")):t.y<0?(m.keyUp("s"),m.keyDown("w")):(m.keyUp("w"),m.keyUp("s"))}}lookAt(e){const t=u.toCanvasPos(e);m.mouse(t.x,t.y),this.#L({clientX:t.x,clientY:t.y})}#L(e){if(this.#A=u.screenToCanvas(new r(e.clientX,e.clientY)),v.connected){const e=u.toArenaPos(this.#A),t=r.subtract(e,this.position);let n=r.scale(u.fov/1200/1.1,t);const o=r.len(n);0!==o&&o<.15&&(n=r.scale(.15/o,n)),v.mx=n.x,v.my=n.y}}#W(e){v.connected&&this.#F({keyCode:e.which})}#$(e){v.connected&&this.#z({keyCode:e.which})}#F(e){if(super.emit("keydown",e.keyCode),v.connected)switch(e.keyCode){case 37:case 65:v.x=-1;break;case 40:case 83:v.y=1;break;case 38:case 87:v.y=-1;break;case 39:case 68:v.x=1;break;case 1:case 32:v.leftMouse=!0;break;case 3:case 16:v.rightMouse=!0}}#z(e){if(super.emit("keyup",e.keyCode),v.connected)switch(e.keyCode){case 37:case 65:case 39:case 68:v.x=0;break;case 40:case 83:case 38:case 87:v.y=0;break;case 1:case 32:v.leftMouse=!1;break;case 3:case 16:v.rightMouse=!1}}};var P,C;!function(e){e[e.Player=0]="Player",e[e.Bullet=1]="Bullet",e[e.Drone=2]="Drone",e[e.Trap=3]="Trap",e[e.Square=4]="Square",e[e.Triangle=5]="Triangle",e[e.Pentagon=6]="Pentagon",e[e.AlphaPentagon=7]="AlphaPentagon",e[e.Crasher=8]="Crasher",e[e.UNKNOWN=9]="UNKNOWN"}(P||(P={})),function(e){e.TeamBlue="#00b2e1",e.TeamRed="#f14e54",e.TeamPurple="#bf7ff5",e.TeamGreen="#00e16e",e.Square="#ffe869",e.Triangle="#fc7677",e.Pentagon="#768dfc",e.AlphaPentagon="#768dfc",e.Crasher="#f177dd",e.NecromancerDrone="#fcc376"}(C||(C={}));const _=[C.TeamBlue,C.TeamRed,C.TeamPurple,C.TeamGreen];class b extends x{type;parent;extras;constructor(e,t,n){super(),this.type=e,this.parent=t,this.extras=n}updatePos(e){super.updatePos(e)}}class R{onload;#K=!1;constructor(e){this.onload=e}load(){this.#K||(this.#K=!0,this.onload())}}const S=new class extends R{#O=[];#G=this.#O;constructor(){super((()=>{l.on("frame_end",(()=>{this.#G=this.#O,this.#O=[]})),this.#V(),this.#q(),this.#j(),this.#Y()}))}get entities(){return this.#O}getPlayer(){return this.#O.filter((e=>e.type==P.Player&&r.distance(e.position,g.position)<28))[0]}#X(e,t,n={}){let o=this.#J(e,t);if(!o){const s=this.#Q(e,t);o=new b(e,s,{id:Math.random().toString(36).slice(2,5),timestamp:performance.now(),...n})}o.extras.radius=n.radius,o.updatePos(t),this.#O.push(o)}#Q(e,t){if(e==P.Bullet)return this.#J(P.Player,t,300)}#J(e,t,n=42){let o,s=1/0;if(this.#G.forEach(((n,i)=>{if(n.type!==e)return;const a=r.distance(n.position,t);a<s&&(s=a,o=n)})),!(s>n))return o}#V(){c.hookPolygon(3,((e,t)=>{const n=Math.round(r.distance(e[0],e[1])),o=Math.round(r.distance(e[0],e[2])),s=Math.round(r.distance(e[1],e[2]));if(n!==o||o!==s)return;if("#000000"===t.fillStyle)return;e=e.map((e=>u.toArenaPos(e)));const i=r.centroid(...e),a=Math.round(r.radius(...e)),c=t.fillStyle;let d=P.UNKNOWN;switch(a){case 23:case 30:case 40:case 41:case 42:case 43:case 44:case 45:case 46:_.includes(c)&&(d=P.Drone);break;case 35:C.Crasher===c&&(d=P.Crasher);break;case 55:C.Crasher===c&&(d=P.Crasher),C.Triangle===c&&(d=P.Triangle)}this.#X(d,i,{color:c,radius:a})}))}#q(){c.hookPolygon(4,((e,t)=>{e=e.map((e=>u.toArenaPos(e)));const n=r.centroid(...e),o=Math.round(r.radius(...e)),s=t.fillStyle;let i=P.UNKNOWN;55===o&&(C.Square===s&&(i=P.Square),(_.includes(s)||C.NecromancerDrone===s)&&(i=P.Drone)),this.#X(i,n,{color:s,radius:o})}))}#j(){c.hookPolygon(5,((e,t)=>{e=e.map((e=>u.toArenaPos(e)));const n=r.centroid(...e),o=Math.round(r.radius(...e)),s=t.fillStyle;let i=P.UNKNOWN;switch(o){case 75:C.Pentagon===s&&(i=P.Pentagon);break;case 200:C.AlphaPentagon===s&&(i=P.AlphaPentagon)}this.#X(i,n,{color:s,radius:o})}))}#Y(){let e,t,n,o=0;const s=()=>{e=u.toArenaPos(e),n=u.toArenaUnits(new r(n,n)).x;let o=P.UNKNOWN;o=n>53?P.Player:P.Bullet,this.#X(o,e,{color:t,radius:n})};c.hookCtx("beginPath",((e,t,n)=>{3===o?3!==o?o=0:o++:o=1})),c.hookCtx("arc",((i,a,c)=>{if(1===o){o++;const t=a.getTransform();return e=new r(t.e,t.f),void(n=t.a)}return 4===o?(o++,void(t=a.fillStyle)):6===o?(o++,void s()):void(o=0)})),c.hookCtx("fill",((e,t,n)=>{2!==o&&5!==o?o=0:o++}))}},T=new class{canvas;ctx;constructor(){this.canvas=c.createCanvas();const e=this.canvas.getContext("2d");if(null==e)throw new Error("diepAPI: Your browser does not support canvas.");this.ctx=e,l.once("ready",(()=>{document.body.appendChild(this.canvas),_window.addEventListener("resize",(()=>this.#Z())),l.on("frame",(()=>this.#ee())),this.#Z()}))}#Z(){this.canvas.width=_window.innerWidth*_window.devicePixelRatio,this.canvas.height=_window.innerHeight*_window.devicePixelRatio}#ee(){this.canvas.width=_window.innerWidth*_window.devicePixelRatio,this.canvas.height=_window.innerHeight*_window.devicePixelRatio,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(1,0,0,1,0,0)}},M=new class extends R{#te=!1;#ne=!1;#oe=!1;#se=!1;#ie=!1;constructor(){super((()=>{S.load(),l.on("frame",(()=>{S.entities.forEach((e=>{const t=u.toCanvasPos(e.position),n=u.toCanvasPos(e.predictPos(1e3)),o=u.toCanvasUnits(new r(2*e.extras.radius,2*e.extras.radius));this.#te&&this.#ae(e,t,o),this.#ne&&this.#re(t,n),this.#oe&&this.#ce(e,t),this.#se&&this.#de(e,t,o)})),this.#ie&&this.#le()}))}))}drawAll(e){this.#te=e,this.#ne=e,this.#oe=e,this.#se=e,this.#ie=e}drawBoundingBox(e){this.#te=e}drawVelocity(e){this.#ne=e}drawParent(e){this.#oe=e}drawInfo(e){this.#se=e}drawStats(e){this.#ie=e}#ae(e,t,n){T.ctx.save(),T.ctx.strokeStyle=e.type===P.UNKNOWN?"#ffffff":e.extras.color,T.ctx.lineWidth=u.toCanvasUnits(new r(5,5)).x,T.ctx.strokeRect(t.x-n.x/2,t.y-n.y/2,n.x,n.y),T.ctx.restore()}#re(e,t){T.ctx.save(),T.ctx.strokeStyle="#000000",T.ctx.lineWidth=u.toCanvasUnits(new r(5,5)).x,T.ctx.beginPath(),T.ctx.moveTo(e.x,e.y),T.ctx.lineTo(t.x,t.y),T.ctx.stroke(),T.ctx.restore()}#ce(e,t){if(null==e.parent)return;const n=u.toCanvasPos(e.parent.position);T.ctx.save(),T.ctx.strokeStyle="#8aff69",T.ctx.lineWidth=u.toCanvasUnits(new r(5,5)).x,T.ctx.beginPath(),T.ctx.moveTo(t.x,t.y),T.ctx.lineTo(n.x,n.y),T.ctx.stroke(),T.ctx.restore()}#de(e,t,n){T.ctx.save();const o=u.toCanvasUnits(new r(30,30)).x;T.ctx.font=o+"px Ubuntu",T.ctx.fillStyle="#ffffff",T.ctx.strokeStyle="#000000",T.ctx.lineWidth=o/5,T.ctx.strokeText(`${e.extras.id} ${Math.floor((performance.now()-e.extras.timestamp)/1e3)}`,t.x,t.y-.7*n.y),T.ctx.fillText(`${e.extras.id} ${Math.floor((performance.now()-e.extras.timestamp)/1e3)}`,t.x,t.y-.7*n.y),T.ctx.restore()}#le(){const e=`Debug Tool:\n        Game Info:\n        gamemode: ${k.gamemode}\n        entities: ${S.entities.length}\n        \n        Player Info:\n        Is dead: ${k.isDead}\n        level: ${k.level}\n        tank: ${k.tank}\n        position: ${Math.round(k.position.x)},${Math.round(k.position.y)}\n        mouse: ${Math.round(k.mouse.x)},${Math.round(k.mouse.y)}\n        velocity [units/seconds]: ${Math.round(Math.hypot(k.velocity.x,k.velocity.y))}`;T.ctx.save();const t=20*_window.devicePixelRatio;T.ctx.font=`${t}px Ubuntu`,T.ctx.fillStyle="#ffffff",T.ctx.strokeStyle="#000000",T.ctx.lineWidth=t/5,e.split("\n").forEach(((e,n)=>{T.ctx.strokeText(e,0,.25*_window.innerHeight+n*t*1.05),T.ctx.fillText(e,0,.25*_window.innerHeight+n*t*1.05)})),T.ctx.restore()}},A=new class{canvas;ctx;#v;#he;constructor(){this.canvas=c.createCanvas();const e=this.canvas.getContext("2d");if(null==e)throw new Error("diepAPI: Your browser does not support canvas.");this.ctx=e,_window.addEventListener("resize",(()=>this.#Z())),l.on("frame",(()=>this.#ee())),this.#Z(),l.once("ready",(()=>{if(this.#v=document.getElementById("canvas"),null==this.#v)throw new Error("diepAPI: Game canvas does not exist.");if(this.#he=this.#v.getContext("2d"),null==this.#he)throw new Error("diepAPI: Game canvas context does not exist.");this.#we()}))}#Z(){this.canvas.width=_window.innerWidth*_window.devicePixelRatio,this.canvas.height=_window.innerHeight*_window.devicePixelRatio}#ee(){this.canvas.width=_window.innerWidth*_window.devicePixelRatio,this.canvas.height=_window.innerHeight*_window.devicePixelRatio,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(1,0,0,1,0,0)}#we(){c.overrideCtx("fillRect",((e,t,n)=>{if("object"!=typeof t.fillStyle||null==this.#he)return Reflect.apply(e,t,n);const o=Reflect.apply(e,t,n);return this.#he.save(),this.#he.setTransform(1,0,0,1,0,0),this.#he.globalAlpha=1,this.#he.drawImage(this.canvas,0,0),this.#he.restore(),o}))}};diepAPI=t})();
